import{d as L,u as x,_ as D,l as v,s as w,o as P,a as r,c as A,b as s,F as p,r as Y,e as o,q as f,n as g,w as h,v as b,x as F,y as B,f as C,p as R,i as V,z,k as I}from"./index-C7VahlKW.js";import{a as O}from"./axios-Cm0UX6qg.js";const y="/assets/robot-BnFUrXEK.png",U="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAGoElEQVR4nO3bTWxUZRSH8XNnoEXaxhbjxk1riSsTJRa1G6UEiCZKUgwSE1TqAsIGbVw1RgOGRN2Y1LCQ2BjLzg9im6CJCRALbjBSLEs11NaFK7DFtkILM+OZigYkPaQz98593/c+v2SmZ3ZsntwOf4gEwJIIBDAQCGAgEMBAIICBQAADgQAGAgEMBAIYCAQwEAhgIBDAQCCAgUAAA4EABgIBDAQCGAgEMBAIYCAQwEAggIFAAAOBAAYCAQwEAhgIBDAQCGAgEMBAIICBQAADgQAGAgEMBAIYCAQwEAhgIBDAQCCAgUAAA4EAhkQD2bL1+Q3FYtQWlYptAsSsFOUmcrnSxPFjX5zSj4mI9BWrp7tfaLu2UNivf/weAWohkmmtZXhlXf7tb4Y/nZAYxRrIpq07uqVY/ERK0qwfgdoqh5LLvXLy2OfD+ikWsQWyGEehOKQnkK58bltckcQSSHd3T/PMtdlfeXLACfokaVrZeP/w8OC0fqpKLIFsemb7oMaxS0/ADZEcOfn10R6pUlyBTGkgzXoCbtCniAbSoldVqg5k87Pbu0pF+VZPwClRTjae+OroiFSBQBAsbwK577nD+o47aV2Tl4Pb0v1N9fXPpuTibFEv9/3+5V59XxqBBOapB1fJzs4GvdLx26Xr8ubwZb38QCAZc7D7bmm9Z4Ve6Rg695cM/XhFLz8QSIasrovk8Etr9ErPW0PTMvlHQS8/EEiGPPFAvex+slGvdFycLej3j2m9/EEgGdK7uUkeaa3TKx3f/XJVBk7P6eUPAsmQD19skYb6nF7p+ODEjIxOLujlDwLJiA59crymT5A0vfzxJX33C4FkxM7O1fpXvHfplY5z+uTo1yeIbwgkI97f0Sz3NuX1SsfA6Vn9DjKvl18IJANYzytHIBnAel45AskA1vPKEUjgWM+rQyCBYz2vDoEEjvW8OgQSONbz6hBIwFjPq0cgAWM9rx6BBIz1vHoEEijW83gQSKBYz+NBIIFiPY8HgQSI9Tw+BBIg1vP4EEiAWM/jQyABYj2PD4EEhvU8XgQSGNbzeBFIYFjP40UgAWE9jx+BBIT1PH4EEhDW8/gRSCBYz5NBIIFgPU8GgQSC9TwZBBII1vNkEEgAWM+TQyABYD1PDoEEgPU8OQTiOdbzZBGI51jPk0UgnmM9TxaBeIz1PHkE4jHW8+QRiMdYz5NHIB5jPU8egXiK9bw2CMRTrOe1QSCeYj2vDQLxEOt57RCIh1jPa4dAPMR6XjsE4hnW89oiEM+wntcWgXiG9by2CMQzrOe1RSAeYT2vPQLxCOt57RGIR1jPa49APMF6ng4C8QTreToIxBOs5+kgEA+wnqeHQDzAep4eAvEA63l6CMQDrOfpIRDHsZ6ni0Acx3qeLgJxHOt5ugjEYazn6SMQh7Gep49AHMZ6nj4CcRTruRsIxFGs524gEEexnruBQBzFeu4GAnEQ67k7CMRBrOfuIBAHsZ67g0Acw3ruFgJxDOu5WwjEMaznbgkmkFxd45j+8N5j6x9Kbx1UP/08fuXyn7oSYlFxYXad/liSN4EAaSAQwEAggIFAAAOBAAYCAQwEAhhiCWTPq3379WfF5ucX2ubmZnvkhoX5eSkWb/2nEPkV+REJSEfHo23iodHRHyYkIIXrhS65oa6+XnK5W/8LQkND42B9fd2EVCHava+vpD+xDFu2bNZ3/xw/fkLfsRwEUgECyQ4CqQCBZAeBVIBAsoNAKrB+fYe0tLTo5Y+pqSk5e3ZULywHgVRg7dp2aW9v18sf4+PjcuHCuF5YDgKpUGfn49LU1KSX+2ZmZuTMme/1wnIRSBXKT5Lyr1rll4vKv1aVXzw5KkcggIFAAAOBAAYCAQwEAhiiPfv6xrSQh/UGcJNI5Hz5n7sPlkqySz8DuEkUyZFob29fV6HAf3gC/i+fl436FBHR7yEjIrJBXwD+cWrg0Htdi4H09h5onitcHdOzVV9A1k025Fet6+8/ML0YSJn+qtVWLMhwiS/syDAN4vzq/Kquchz6sfz5Vvql/YB+ae8RnibIlslIov6PDr3br/d/bgvkX7t731iXl2JzsShdAgQql5ORguSmB/rfGdOPt1kyEAAEApgIBDAQCGAgEMBAIICBQAADgQAGAgEMBAIYCAQwEAhgIBDAQCCAgUAAA4EABgIBDAQCGAgEMBAIYCAQwEAggIFAAAOBAAYCAQwEAhgIBDAQCGAgEMBAIICBQAADgQAGAgEMBAIYCAQwEAhgIBDAQCCAgUAAw9841Dw6AFpvnAAAAABJRU5ErkJggg==",j=L("chat",{state:()=>({isLoading:!1,showSetting:!1,allowEnterToSend:!0,systemMessage:{role:"system",content:""},messages:[]}),persist:{storage:localStorage,paths:["messages","systemMessage","allowEnterToSend"]},getters:{},actions:{requestMessage(){if(this.isLoading)return;this.isLoading=!0;const l=this,m=x(),e={messages:[l.systemMessage,...l.messages],temperature:.6};O.post(m.gptURL,e,{headers:{"Content-Type":"application/json"}}).then(function(c){try{l.isLoading=!1;const n=c.data;if(n.error!==void 0){alert(n.error.message);return}const u=n.choices[0].message;l.messages.push(u)}catch(n){alert(n)}}).catch(function(c){l.isLoading=!1,alert(c)})},cleanAll(){this.messages=[]}}}),d=l=>(R("data-v-2298f621"),l=l(),V(),l),H={class:"columns is-multiline m-0"},X={class:"container is-max-desktop"},G={class:"columns is-multiline"},K={class:"column"},W={class:"columns is-mobile",style:{overflow:"hidden"}},N={class:"column is-narrow"},Z={key:0,src:y,class:"shadow-sm",style:{width:"45px",height:"45px","border-radius":"4px","margin-right":"10px","background-color":"white",padding:"2px"},alt:""},q={key:1,src:U,class:"shadow-sm",style:{width:"45px",height:"45px","border-radius":"4px","margin-right":"10px","background-color":"white",padding:"2px"},alt:""},J=["innerHTML"],$={key:0,class:"column is-narrow"},ss=["onClick","disabled"],es=d(()=>s("i",{class:"bi bi-arrow-clockwise"},null,-1)),ts=[es],os={key:0,class:"column is-full cal-basic cal-assistant"},is=z('<div class="container is-max-desktop" data-v-2298f621><div class="columns is-multiline" data-v-2298f621><div class="column" data-v-2298f621><div class="columns is-mobile" data-v-2298f621><div class="column is-narrow" data-v-2298f621><img src="'+y+'" class="shadow-sm" style="width:45px;height:45px;border-radius:4px;margin-right:10px;background-color:white;padding:2px;" alt="" data-v-2298f621></div><div class="column message" data-v-2298f621><div class="loader mt-4" data-v-2298f621></div></div></div></div></div></div>',1),as=[is],ns=d(()=>s("div",{class:"column is-full",style:{height:"150px"}},null,-1)),ls={class:"columns is-gapless is-mobile"},ds={class:"column is-narrow",style:{margin:"0 0 0 0"}},cs=d(()=>s("i",{class:"bi bi-gear"},null,-1)),rs=[cs],As={class:"column"},gs=["disabled"],us={class:"column is-narrow",style:{margin:"0 0 0 5px"}},hs=["disabled"],ms=d(()=>s("i",{class:"bi bi-send"},null,-1)),vs=[ms],ps=["disabled"],fs=d(()=>s("i",{class:"bi bi-trash3"},null,-1)),_s=[fs],Es=d(()=>s("div",{class:"modal-background"},null,-1)),ws={class:"modal-card"},bs={class:"modal-card-head"},Bs=d(()=>s("p",{class:"modal-card-title"},"Setting",-1)),Cs={class:"modal-card-body"},Is={class:"columns is-multiline is-mobile"},xs={class:"column is-full"},ys=d(()=>s("p",{class:"title is-5"}," System Prompt (Optional) ",-1)),Qs={class:"column is-full"},ks={class:"field is-horizontal"},Ss=d(()=>s("div",{class:"field-label"},[s("label",{class:"label",style:{width:"200px"}},"Use 'Enter' key for send")],-1)),Ms={class:"field-body"},Ts={class:"field is-narrow"},Ls={class:"control"},Ds={class:"radio mr-3"},Ps={class:"radio"},Ys={class:"modal-card-foot"},Fs={class:"buttons"},Rs={__name:"ChatView",setup(l){const m=x(),e=j(),c=v(null),n=v("");function u(a){const t=n.value.trim();t!==""&&(k(t),n.value="",e.requestMessage())}function Q(a){confirm("Are you sure you want to regenerate from here?")&&(e.messages=e.messages.slice(0,a+1),e.requestMessage())}function k(a){const t={role:"user",content:a.replaceAll(`
`,"<br />")};e.messages.push(t)}function _(){c.value.style.height="0px";let a=c.value.scrollHeight;a>300&&(a=300),c.value.style.height=a+"px"}function S(){confirm("Are you sure to clean?")&&e.cleanAll()}const E=v(null);function M(){I(()=>{const a=E.value;a.scrollTop=a.scrollHeight})}return w(e.messages,async(a,t)=>{M()}),w(n,async(a,t)=>{await I(()=>{_()})}),P(()=>{m.tag="chat",_()}),(a,t)=>(r(),A(p,null,[s("div",{class:"canvas",ref_key:"mainCanvasRef",ref:E},[s("div",H,[(r(!0),A(p,null,Y(o(e).messages,(i,T)=>(r(),A(p,null,[i.role!=="system"?(r(),A("div",{key:0,class:g(["column is-full cal-basic",i.role==="user"?"cal-user":"cal-assistant"])},[s("div",X,[s("div",G,[s("div",K,[s("div",W,[s("div",N,[i.role!=="user"?(r(),A("img",Z)):(r(),A("img",q))]),s("div",{class:"column message",innerHTML:i.content},null,8,J)])]),i.role==="user"&&!o(e).isLoading?(r(),A("div",$,[s("button",{class:g(["button is-white",o(e).isLoading?"is-loading":""]),onClick:Vs=>Q(T),disabled:o(e).isLoading},ts,10,ss)])):f("",!0)])])],2)):f("",!0)],64))),256)),o(e).isLoading?(r(),A("div",os,as)):f("",!0),ns])],512),s("div",{class:g(["inputView",o(e).isLoading?"inputView-disabled":""])},[s("div",ls,[s("div",ds,[s("button",{type:"button",class:g(["button is-white"]),onClick:t[0]||(t[0]=i=>o(e).showSetting=!0)},rs)]),s("div",As,[h(s("textarea",{"onUpdate:modelValue":t[1]||(t[1]=i=>n.value=i),placeholder:"說點什麼吧",ref_key:"inputTextareaRef",ref:c,onKeyup:t[2]||(t[2]=F(i=>o(e).allowEnterToSend?u():null,["enter"])),disabled:o(e).isLoading},null,40,gs),[[b,n.value]])]),s("div",us,[s("button",{type:"button",class:g(["button is-white",o(e).isLoading?"is-loading":""]),onClick:u,disabled:o(e).isLoading},vs,10,hs),s("button",{type:"button",class:g(["button is-white",o(e).isLoading?"is-loading":""]),onClick:S,disabled:o(e).isLoading},_s,10,ps)])])],2),s("div",{class:g(["modal",o(e).showSetting?"is-active":""])},[Es,s("div",ws,[s("header",bs,[Bs,s("button",{class:"delete","aria-label":"close",onClick:t[3]||(t[3]=i=>o(e).showSetting=!1)})]),s("section",Cs,[s("div",Is,[s("div",xs,[ys,h(s("textarea",{class:"column systemMessage",style:{height:"150px"},"onUpdate:modelValue":t[4]||(t[4]=i=>o(e).systemMessage.content=i),placeholder:"Please enter the System Prompt."},null,512),[[b,o(e).systemMessage.content]])]),s("div",Qs,[s("div",ks,[Ss,s("div",Ms,[s("div",Ts,[s("div",Ls,[s("label",Ds,[h(s("input",{type:"radio",value:!0,"onUpdate:modelValue":t[5]||(t[5]=i=>o(e).allowEnterToSend=i)},null,512),[[B,o(e).allowEnterToSend]]),C(" Allow ")]),s("label",Ps,[h(s("input",{type:"radio",value:!1,"onUpdate:modelValue":t[6]||(t[6]=i=>o(e).allowEnterToSend=i)},null,512),[[B,o(e).allowEnterToSend]]),C(" Deny ")])])])])])])])]),s("footer",Ys,[s("div",Fs,[s("button",{class:"button is-success",onClick:t[7]||(t[7]=i=>o(e).showSetting=!1)},"Back")])])])],2)],64))}},Us=D(Rs,[["__scopeId","data-v-2298f621"]]);export{Us as default};
