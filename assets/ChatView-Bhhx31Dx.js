import{_ as Y,u as F,l as a,s as R,o as H,a as c,c as r,b as s,n as _,w as f,v as B,F as E,r as L,q as b,e as m,k,p as O,i as j}from"./index-CTbSzU7k.js";import{a as z}from"./axios-Bo0ATomq.js";const w="/assets/robot-BnFUrXEK.png",U="data:image/png;base64,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",i=g=>(O("data-v-f614ff05"),g=g(),j(),g),V={class:"columns is-multiline m-0"},X={class:"container is-max-desktop"},G={class:"columns is-multiline"},K={class:"column"},W={class:"columns is-mobile"},N=i(()=>s("div",{class:"column is-narrow"},[s("img",{src:w,class:"shadow-sm",style:{width:"45px",height:"45px","border-radius":"4px","margin-right":"10px","background-color":"white",padding:"2px"},alt:""})],-1)),Z={class:"column",style:{"margin-right":"15px"}},q={class:"columns is-multiline is-mobile"},J=i(()=>s("h1",{class:"column is-full",style:{"padding-left":"0","font-weight":"bold"}},"聊天機器人特性",-1)),$={class:"columns is-multiline is-mobile"},ss=i(()=>s("h1",{class:"column is-full",style:{"padding-left":"0","font-weight":"bold"}},"當前可記住對話輪次數（一次問答為一輪, 請不要超過50輪）",-1)),es={class:"container is-max-desktop"},ts={class:"columns is-multiline"},os={class:"column"},ls={class:"columns is-mobile",style:{overflow:"hidden"}},is={class:"column is-narrow"},ns={key:0,src:w,class:"shadow-sm",style:{width:"45px",height:"45px","border-radius":"4px","margin-right":"10px","background-color":"white",padding:"2px"},alt:""},as={key:1,src:U,class:"shadow-sm",style:{width:"45px",height:"45px","border-radius":"4px","margin-right":"10px","background-color":"white",padding:"2px"},alt:""},cs=["innerHTML"],rs={key:0,class:"column is-narrow"},us=["onClick"],ds=i(()=>s("i",{class:"bi bi-arrow-clockwise"},null,-1)),As=[ds],gs={key:0,class:"column is-full cal-basic cal-assistant"},hs={class:"container is-max-desktop"},ps={class:"columns is-multiline"},ms={class:"column"},vs={class:"columns is-mobile"},_s=i(()=>s("div",{class:"column is-narrow"},[s("img",{src:w,class:"shadow-sm",style:{width:"45px",height:"45px","border-radius":"4px","margin-right":"10px","background-color":"white",padding:"2px"},alt:""})],-1)),fs={class:"column message"},Bs=["innerHTML"],Es=i(()=>s("span",{class:"blinking-cursor"},"▋",-1)),bs=i(()=>s("div",{class:"column is-full",style:{height:"150px"}},null,-1)),ws={class:"columns is-gapless is-mobile"},xs={class:"column"},Cs=["disabled"],Is={class:"column is-narrow",style:{margin:"0 0 0 5px"}},Qs=["disabled"],ks=i(()=>s("i",{class:"bi bi-send"},null,-1)),ys=[ks],Ms=["disabled"],Ss=i(()=>s("i",{class:"bi bi-arrow-clockwise"},null,-1)),Ds=[Ss],Ts={__name:"ChatView",setup(g){const u=F(),A=a({role:"system",content:""}),h=a(20),y=a(""),l=a([]),p=a(null),d=a(""),n=a(!1);function M(e){const t=d.value.trim();t===""||u.gptKey===""||(D({role:"user",content:t.replaceAll(`
`,"<br />")}),v(),d.value="",x())}function S(e){l.value=l.value.slice(0,e),v(),x()}async function x(){n.value=!0,z.post(u.bugptURL,{messages:A.value.content===""?l.value:[A.value,...l.value],temperature:0},{headers:{"Content-Type":"application/json"}}).then(function(e){try{n.value=!1;const t=e.data;if(t.error!==void 0){alert(t.error.message);return}const o=t.choices[0].message;l.value.push(o),v()}catch(t){alert(t)}}).catch(function(e){n.value=!1,alert(e)})}function D(e){if(h.value>50){alert("對話輪次數太大！");return}if(l.value.length>h.value*2){alert("已達到最大對話輪次。");return}l.value.push(e)}function C(){p.value.style.height="0px";let e=p.value.scrollHeight;e>300&&(e=300),p.value.style.height=e+"px"}function T(){confirm("Are you sure to clean?")&&I()}function I(){l.value=[],d.value="",C()}const Q=a(null);function v(){k(()=>{const e=Q.value;e.scrollTop=e.scrollHeight})}return R(d,async(e,t)=>{await k(()=>{C()})}),H(()=>{u.tag="chat",I()}),(e,t)=>(c(),r(E,null,[s("div",{class:"canvas",ref_key:"mainCanvasRef",ref:Q},[s("div",V,[s("div",{class:_(["column is-full cal-basic",A.value.role==="user"?"cal-user":"cal-assistant"])},[s("div",X,[s("div",G,[s("div",K,[s("div",W,[N,s("div",Z,[s("div",q,[J,f(s("textarea",{class:"column systemMessage","onUpdate:modelValue":t[0]||(t[0]=o=>A.value.content=o),placeholder:"請輸入聊天機器人的特性。"},null,512),[[B,A.value.content]])]),s("div",$,[ss,f(s("input",{class:"column systemMessage","onUpdate:modelValue":t[1]||(t[1]=o=>h.value=o),placeholder:"請輸入雙數。",type:"number"},null,512),[[B,h.value]])])])])])])])],2),(c(!0),r(E,null,L(l.value,(o,P)=>(c(),r(E,null,[o.role!=="system"?(c(),r("div",{key:0,class:_(["column is-full cal-basic",o.role==="user"?"cal-user":"cal-assistant"])},[s("div",es,[s("div",ts,[s("div",os,[s("div",ls,[s("div",is,[o.role!=="user"?(c(),r("img",ns)):(c(),r("img",as))]),s("div",{class:"column message",innerHTML:o.content},null,8,cs)])]),o.role==="assistant"?(c(),r("div",rs,[s("div",{style:{padding:"4px",border:"1px solid lightgrey","border-radius":"4px",cursor:"pointer"},onClick:Ps=>S(P)},As,8,us)])):b("",!0)])])],2)):b("",!0)],64))),256)),n.value?(c(),r("div",gs,[s("div",hs,[s("div",ps,[s("div",ms,[s("div",vs,[_s,s("div",fs,[s("span",{innerHTML:y.value},null,8,Bs),Es])])])])])])):b("",!0),bs])],512),s("div",{class:_(["inputView",n.value||m(u).gptKey===""?"inputView-disabled":""])},[s("div",ws,[s("div",xs,[f(s("textarea",{"onUpdate:modelValue":t[2]||(t[2]=o=>d.value=o),placeholder:"說點什麼吧",ref_key:"inputTextareaRef",ref:p,disabled:n.value||m(u).gptKey===""},null,8,Cs),[[B,d.value]])]),s("div",Is,[s("button",{type:"button",class:"button",onClick:M,disabled:n.value||m(u).gptKey===""},ys,8,Qs),s("button",{type:"button",class:"button",onClick:T,disabled:n.value||m(u).gptKey===""},Ds,8,Ms)])])],2)],64))}},Rs=Y(Ts,[["__scopeId","data-v-f614ff05"]]);export{Rs as default};
