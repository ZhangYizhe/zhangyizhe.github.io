import{d as T,u as x,_ as L,l as _,s as E,o as D,a as r,c as g,b as s,F as v,r as P,e as t,q as p,n as A,w as u,v as w,x as Y,y as B,f as C,p as F,i as R,z as V,k as I}from"./index-CPq7eaVF.js";import{a as z}from"./axios-Cm0UX6qg.js";const y="/assets/robot-BnFUrXEK.png",O="data:image/png;base64,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",U=T("chat",{state:()=>({isLoading:!1,showSetting:!1,allowEnterToSend:!0,systemMessage:{role:"system",content:""},message:"",messages:[]}),persist:{storage:localStorage,paths:["message","messages","systemMessage","allowEnterToSend"]},getters:{},actions:{requestMessage(){if(this.isLoading)return;this.isLoading=!0;const n=this,h=x(),e={messages:[n.systemMessage,...n.messages],temperature:.6};z.post(h.gptURL,e,{headers:{"Content-Type":"application/json"}}).then(function(d){try{n.isLoading=!1;const c=d.data;if(c.error!==void 0){alert(c.error.message);return}const m=c.choices[0].message;n.messages.push(m)}catch(c){alert(c)}}).catch(function(d){n.isLoading=!1,alert(d)})},cleanAll(){this.messages=[]}}}),l=n=>(F("data-v-fa4ec7b3"),n=n(),R(),n),j={class:"columns is-multiline m-0"},H={class:"container is-max-desktop"},X={class:"columns is-multiline"},G={class:"column"},K={class:"columns is-mobile",style:{overflow:"hidden"}},W={class:"column is-narrow"},N={key:0,src:y,class:"shadow-sm",style:{width:"45px",height:"45px","border-radius":"4px","margin-right":"10px","background-color":"white",padding:"2px"},alt:""},Z={key:1,src:O,class:"shadow-sm",style:{width:"45px",height:"45px","border-radius":"4px","margin-right":"10px","background-color":"white",padding:"2px"},alt:""},q=["innerHTML"],J={key:0,class:"column is-narrow"},$=["onClick","disabled"],ss=l(()=>s("i",{class:"bi bi-arrow-clockwise"},null,-1)),es=[ss],ts={key:0,class:"column is-full cal-basic cal-assistant"},os=V('<div class="container is-max-desktop" data-v-fa4ec7b3><div class="columns is-multiline" data-v-fa4ec7b3><div class="column" data-v-fa4ec7b3><div class="columns is-mobile" data-v-fa4ec7b3><div class="column is-narrow" data-v-fa4ec7b3><img src="'+y+'" class="shadow-sm" style="width:45px;height:45px;border-radius:4px;margin-right:10px;background-color:white;padding:2px;" alt="" data-v-fa4ec7b3></div><div class="column message" data-v-fa4ec7b3><div class="loader mt-4" data-v-fa4ec7b3></div></div></div></div></div></div>',1),as=[os],is=l(()=>s("div",{class:"column is-full",style:{height:"150px"}},null,-1)),ns={class:"columns is-gapless is-mobile"},ls={class:"column is-narrow",style:{margin:"0 0 0 0"}},ds=l(()=>s("i",{class:"bi bi-gear"},null,-1)),cs=[ds],rs={class:"column"},gs=["disabled"],As={class:"column is-narrow",style:{margin:"0 0 0 5px"}},us=["disabled"],hs=l(()=>s("i",{class:"bi bi-send"},null,-1)),ms=[hs],vs=["disabled"],ps=l(()=>s("i",{class:"bi bi-trash3"},null,-1)),fs=[ps],bs=l(()=>s("div",{class:"modal-background"},null,-1)),_s={class:"modal-card"},Es={class:"modal-card-head"},ws=l(()=>s("p",{class:"modal-card-title"},"Setting",-1)),Bs={class:"modal-card-body"},Cs={class:"columns is-multiline is-mobile"},Is={class:"column is-full"},xs=l(()=>s("p",{class:"title is-5"}," System Prompt (Optional) ",-1)),ys={class:"column is-full"},Qs={class:"field is-horizontal"},ks=l(()=>s("div",{class:"field-label"},[s("label",{class:"label",style:{width:"200px"}},"Use 'Enter' key for send")],-1)),Ss={class:"field-body"},Ms={class:"field is-narrow"},Ts={class:"control"},Ls={class:"radio mr-3"},Ds={class:"radio"},Ps={class:"modal-card-foot"},Ys={class:"buttons"},Fs={__name:"ChatView",setup(n){const h=x(),e=U(),d=_(null);function c(i){const o=e.message.trim();o!==""&&(Q(o),e.message="",e.requestMessage())}function m(i){confirm("Are you sure you want to regenerate from here?")&&(e.messages=e.messages.slice(0,i+1),e.requestMessage())}function Q(i){const o={role:"user",content:i.replaceAll(`
`,"<br />")};e.messages.push(o)}function f(){d.value.style.height="0px";let i=d.value.scrollHeight;i>300&&(i=300),d.value.style.height=i+"px"}function k(){confirm("Are you sure to clean?")&&e.cleanAll()}const b=_(null);function S(){I(()=>{const i=b.value;i.scrollTop=i.scrollHeight})}return E(e.messages,async(i,o)=>{S()}),E(e.message,async(i,o)=>{await I(()=>{f()})}),D(()=>{h.tag="chat",f()}),(i,o)=>(r(),g(v,null,[s("div",{class:"canvas",ref_key:"mainCanvasRef",ref:b},[s("div",j,[(r(!0),g(v,null,P(t(e).messages,(a,M)=>(r(),g(v,null,[a.role!=="system"?(r(),g("div",{key:0,class:A(["column is-full cal-basic",a.role==="user"?"cal-user":"cal-assistant"])},[s("div",H,[s("div",X,[s("div",G,[s("div",K,[s("div",W,[a.role!=="user"?(r(),g("img",N)):(r(),g("img",Z))]),s("div",{class:"column message",innerHTML:a.content},null,8,q)])]),a.role==="user"&&!t(e).isLoading?(r(),g("div",J,[s("button",{class:A(["button is-white",t(e).isLoading?"is-loading":""]),onClick:Rs=>m(M),disabled:t(e).isLoading},es,10,$)])):p("",!0)])])],2)):p("",!0)],64))),256)),t(e).isLoading?(r(),g("div",ts,as)):p("",!0),is])],512),s("div",{class:A(["inputView",t(e).isLoading?"inputView-disabled":""])},[s("div",ns,[s("div",ls,[s("button",{type:"button",class:A(["button is-white"]),onClick:o[0]||(o[0]=a=>t(e).showSetting=!0)},cs)]),s("div",rs,[u(s("textarea",{"onUpdate:modelValue":o[1]||(o[1]=a=>t(e).message=a),placeholder:"說點什麼吧",ref_key:"inputTextareaRef",ref:d,onKeyup:o[2]||(o[2]=Y(a=>t(e).allowEnterToSend?c():null,["enter"])),disabled:t(e).isLoading},null,40,gs),[[w,t(e).message]])]),s("div",As,[s("button",{type:"button",class:A(["button is-white",t(e).isLoading?"is-loading":""]),onClick:c,disabled:t(e).isLoading},ms,10,us),s("button",{type:"button",class:A(["button is-white",t(e).isLoading?"is-loading":""]),onClick:k,disabled:t(e).isLoading},fs,10,vs)])])],2),s("div",{class:A(["modal",t(e).showSetting?"is-active":""])},[bs,s("div",_s,[s("header",Es,[ws,s("button",{class:"delete","aria-label":"close",onClick:o[3]||(o[3]=a=>t(e).showSetting=!1)})]),s("section",Bs,[s("div",Cs,[s("div",Is,[xs,u(s("textarea",{class:"column systemMessage",style:{height:"150px"},"onUpdate:modelValue":o[4]||(o[4]=a=>t(e).systemMessage.content=a),placeholder:"Please enter the System Prompt."},null,512),[[w,t(e).systemMessage.content]])]),s("div",ys,[s("div",Qs,[ks,s("div",Ss,[s("div",Ms,[s("div",Ts,[s("label",Ls,[u(s("input",{type:"radio",value:!0,"onUpdate:modelValue":o[5]||(o[5]=a=>t(e).allowEnterToSend=a)},null,512),[[B,t(e).allowEnterToSend]]),C(" Allow ")]),s("label",Ds,[u(s("input",{type:"radio",value:!1,"onUpdate:modelValue":o[6]||(o[6]=a=>t(e).allowEnterToSend=a)},null,512),[[B,t(e).allowEnterToSend]]),C(" Deny ")])])])])])])])]),s("footer",Ps,[s("div",Ys,[s("button",{class:"button is-success",onClick:o[7]||(o[7]=a=>t(e).showSetting=!1)},"Back")])])])],2)],64))}},Os=L(Fs,[["__scopeId","data-v-fa4ec7b3"]]);export{Os as default};
